
# 背景
    AIGAgent 会保存聊天，图片生成等不同类型AI的配置。使用者可以向AIAgent里面

# 请根据以下内容对AIGAgent进行重构。

# 用户故事
作为一名开发人员，我希望设计一个解决方案，以避免 **AIGAgentBase** 中的代码膨胀问题，从而使该类保持可维护性、可扩展性，并专注于核心职责，而不会因为功能过多而变得复杂。

# 详细说明与需求
## 关注点分离
    将独立的功能（例如认证、配置、遥测、流处理等）提取到单独的辅助类或服务类中。
    为每个职责定义清晰的接口，使 AIGAgentBase 通过委派来处理逻辑，而不是直接实现多种功能。

## 插件/扩展模型
    实现一个扩展机制（例如中间件管道或策略模式），允许通过插件方式添加功能。
    保持 AIGAgentBase 的代码量最小化，通过配置动态加载扩展功能。

## 配置驱动行为
    将功能开关和参数设置从 AIGAgentBase 移到配置文件或依赖注入（DI 容器）注册中。
    支持启用或禁用功能，而无需修改基类代码。

# 验收标准
    AIGAgentBase 仅包含核心编排逻辑，将辅助功能委派给定义良好的服务或扩展模块。
    新功能通过插件方式实现，而不是直接将方法添加到 AIGAgentBase。
    配置控制可选功能，而无需修改 AIGAgentBase 的代码。
    测试验证 AIGAgentBase 能够正确初始化并调用扩展功能，并验证通过配置禁用功能后，其行为更加精简。