---
史诗: 3. 用户引导：默认项目创建和工作流引导页面
---

# 1. 首次默认项目创建

## 用户故事
作为新注册登录的用户，我希望系统自动为我创建一个默认项目，这样我就可以立即开始使用平台，无需手动设置。

**版本：** v0.6

**预估时间：** 8 小时

### 验收标准
**假定** 我首次登录且没有任何项目
**当** 身份验证流程完成时
**那么** 系统会创建一个由我拥有的默认项目

**假定** 项目创建可能会重试
**当** 创建被并发触发多次时
**那么** 我的账户只存在一个默认项目

**假定** 默认项目已创建
**当** 我在认证后被重定向时
**那么** 我会跳转到默认项目的工作流页面


# 2. 唯一标识符和名称生成

## 用户故事
作为用户，我希望我的默认项目有一个可读的名称和唯一的标识符，这样链接是稳定和用户友好的。

**版本：** v0.6

**预估时间：** 4 小时

### 验收标准
**假定** 已存在具有基础名称的项目（例如，"我的第一个项目"）
**当** 为另一个用户创建新的默认项目时
**那么** 标识符是唯一的，可能使用哈希后缀（例如，"my-first-project-198fh131d"）

**假定** 存在多个名称相似的项目
**当** 生成新的标识符时
**那么** 它是唯一且URL安全的


# 3. 所有者角色和权限初始化

## 用户故事
作为用户，我希望被分配为默认项目的所有者，这样我就拥有管理它的完整权限。

**版本：** v0.6

**预估时间：** 5 小时

### 验收标准
**假定** 默认项目已创建
**当** 项目被持久化时
**那么** 我被分配为拥有完整权限的所有者角色

**假定** 角色/访问控制列表已初始化
**当** 我访问项目管理操作时
**那么** 这些操作对所有者是允许的，对非所有者是受限的


# 4. 种子启动器工作流

## 用户故事
作为用户，我希望在我的默认项目中有一个启动器工作流可用，这样我就可以快速理解并开始构建。

**版本：** v0.6

**预估时间：** 6 小时

### 验收标准
**假定** 默认项目已创建
**当** 初始化完成时
**那么** 项目中存在一个启动器工作流（空白画布或模板）

**假定** 启动器工作流已存在
**当** 我打开工作流页面时
**那么** 我可以看到并编辑启动器工作流


# 5. 登录引导行为和优先级 [前端需求点]

## 用户故事
作为回访用户，我希望能够跳转到我最后打开的项目的工作流页面，这样我就可以从上次中断的地方继续；如果我有深度链接，它应该优先执行。

**版本：** v0.6

**预估时间：** 8 小时

### 验收标准
**假定** 我有一个 `lastOpenedProjectId`
**当** 我登录时没有深度链接
**那么** 我被重定向到 `/projects/{lastOpenedProjectId}/workflows`

**假定** 我使用有效的 `redirect_uri` 深度链接登录
**当** 认证后重定向发生时
**那么** 深度链接优先于 `lastOpenedProjectId`

**假定** 我最后打开的项目不可用
**当** 我登录时没有有效的深度链接
**那么** 我被重定向到最近访问的项目，或最近创建的项目，或创建一个新的默认项目作为备选方案


# 6. 引导界面状态和消息

## 用户故事
作为用户，我希望在引导过程中有清晰的界面，这样我就能理解设置进度和结果。

**版本：** v0.6

**预估时间：** 6 小时

### 验收标准
**假定** 我首次登录
**当** 系统正在设置我的环境时
**那么** 我看到一个加载状态，显示消息"正在初始化工作空间..."

**假定** 我的默认项目已创建
**当** 我跳转到工作流页面时
**那么** 我看到一个通知："我们已经为您创建了'我的第一个项目'来帮助您开始。"

**假定** 自动创建失败
**当** 我在认证后跳转时
**那么** 我看到一个非阻塞错误，包含一键重试和"创建项目"选项


# 7. 可观测性和审计性

## 用户故事
作为平台运营者，我希望有引导过程的指标和结构化日志，这样我就可以监控成功率并诊断问题。

**版本：** v0.6

**预估时间：** 5 小时

### 验收标准
**假定** 用户完成首次登录
**当** 引导过程运行时
**那么** 为首次登录、默认项目创建和引导成功发出指标

**假定** 引导事件发生
**当** 生成日志时
**那么** 存在带有关联ID的 `first_login`、`default_project_created` 和 `landing_redirected` 结构化审计条目


# 8. 并发和幂等性保证

## 用户故事
作为平台运营者，我希望引导过程在并发情况下是安全的，这样永远不会创建重复的默认项目。

**版本：** v0.6

**预估时间：** 6 小时

### 验收标准
**假定** 同一用户有多个并发的首次登录尝试
**当** 项目创建被触发时
**那么** 只创建一个默认项目

**假定** 由于临时错误而重试创建
**当** 重试发生时
**那么** 操作保持幂等性且不会创建重复项目


# 9. 邀请/组织流程和已删除项目边缘情况[前端需求]

## 用户故事
作为通过邀请加入或删除我唯一项目后的用户，我希望引导过程表现适当，这样我就能跳转到正确的目标，而不会意外创建新项目。

**版本：** v0.6

**预估时间：** 6 小时

### 验收标准
**假定** 我通过邀请加入现有组织/项目
**当** 我完成身份验证时
**那么** 我被重定向到被邀请的资源，且不会自动创建默认项目

**假定** 我之前删除了我唯一的项目
**当** 我下次登录且没有其他项目时
**那么** 创建一个新的默认项目，我被重定向到其工作流页面
